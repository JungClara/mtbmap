<div id="routes-tabs">
    <header>
        <nav>
            <ul>
                <li><a href="#routes-content-routing">Vyhledávání</a></li>
                <li><a href="#routes-content-manual">Vlastní</a></li>
                <li><a href="#routes-content-gpx">Nahrát GPX</a></li>
            </ul>
        </nav>
    </header>
    <section>
        <article id="routes-content-routing" class="subtab-panel">
	        <div id="routes-settings">
	            <h4>Zadejte do mapy body, kterými vést trasu</h4>
	            <form id="routes-params">
	                <h5>Parametry vyhledávání tras:</h5>
	                <div id="weights_template">
	                    {% for wc in weight_collections %}
	                        <input id="weights_template_{{ wc.id }}" value="{{ wc.id }}" name="weights__template" type="radio" />
	                        <label for="weights_template_{{ wc.id }}">{{ wc.name }}</label>
	                    {% endfor %}
	                </div>
	                <div id="routes-accordion">
	                    {# map/routingparams.html loaded on page load/refresh #}
	                </div>
	            </form>
	            <div class="line-buttons">
	                <form onsubmit="getRoute(event)" method="POST">
	                    {% csrf_token %}
	                    <input class="get-route-button" type="submit" value="HLEDAT TRASU">
	                </form>
	                <button class="reset-line">Smazat trasu</button>
	            </div>
	            <div id="params-buttons">
	                Nahrát parametry:<input id="files" type="file" name="files[]" onchange="handleTemplate(event)" size="10" class="margin">
	                <br />
	                Uložit parametry:
	                <form action="/map/gettemplate/" method="post" target="_blank" class="inline-block">
	                    {% csrf_token %}
	                    <input type="hidden" name="params" class="params" value="" />
	                    <input class="get-template-button" type="submit" value="Uložit"/>
	                </form>
	            </div>
	        </div>
	        <div id="routes-results" style="display: none;">
	        	<h4>Výsledky vyhledávání</h4>
        	    <div class="length"></div>
                <br>
                <form method="post" action="/map/altitudeprofile/" target="_blank" >
                    {% csrf_token %}
                    <input type="hidden" name="profile-params" class="profile-params" value="" />
                    <input class="create-profile-button" type="submit" value="Vytvořit profil">
                </form>
                <form method="post" action="/map/creategpx/" target="_blank" >
                    {% csrf_token %}
                    <input type="hidden" name="profile-params" class="profile-params" value="" />
                    <input class="create-gpx-button" type="submit" value="Vytvořit GPX">
                </form>
                <br />
                <button class="back-to-settings">Změnit parametry</button>
                <button class="reset-line">Nové hledání</button>
                <br />
                <button class="open-evaluation-dialog">Ohodnotit vyhledávání</button>
                <div id="evaluation-dialog-form" title="Hodnocení vyhledané trasy">
                	<form id="send-evaluation-form">
                        {% csrf_token %}
                        <div>
                        	Ohodnoťte, prosím, jak vám výsledek vyhledávání tras vyhovuje. 
                        	Doplňte komentář, pokud nabízené možnosti nejsou dostatečné.
                        	Děkujeme.
                        </div>
                        <table>
                        {{ evaluation_form.as_table }}
                        </table>
                    </form>
                    <div class="error-message"></div>
                </div>
                <form method="POST" onsubmit="sendEvaluation(event)" style="display: none">
                    {% csrf_token %}
                    <input id="send-evaluation-button" type="submit" value="Odeslat" />
                </form>
	        </div>
            <div class="loading"></div>
        </article>
        <article id="routes-content-manual" class="subtab-panel">
            <h4>Trasu zadejte klikáním přímo do mapy</h4>
            <div class="line-buttons">
                <div class="length"></div>
                <br>
                <button class="fit-to-line">Zobrazit podle trasy</button>
                <button class="reset-line">Smazat</button>
                <br />
                <form method="post" action="/map/altitudeprofile/" target="_blank" >
                    {% csrf_token %}
                    <input type="hidden" name="profile-params" class="profile-params" value="" />
                    <input class="create-profile-button" type="submit" value="Vytvořit profil">
                </form>
                <form method="post" action="/map/creategpx/" target="_blank" >
                    {% csrf_token %}
                    <input type="hidden" name="profile-params" class="profile-params" value="" />
                    <input class="create-gpx-button" type="submit" value="Vytvořit GPX">
                </form>
            </div>
        </article>
        <article id="routes-content-gpx" class="subtab-panel">
            <h4>Nahrajte vlastní GPX soubor</h4>
            <input id="files" type="file" name="files[]" onchange="handleGPX(event)" size="10" class="margin">
            <br>
            <div class="line-buttons">
                <div class="length"></div>
                <br>
                <button class="fit-to-line">Zobrazit podle trasy</button>
                <button class="reset-line">Smazat</button>
                <br />
                <form method="post" action="/map/altitudeprofile/" target="_blank" >
                    {% csrf_token %}
                    <input type="hidden" name="profile-params" class="profile-params" value="" />
                    <input class="create-profile-button" type="submit" value="Vytvořit profil">
                </form>
            </div>
        </article>
    </section>
</div>
