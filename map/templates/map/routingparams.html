{% load i18n %}
<h3>{% trans "Global settings" %}</h3>
<div>
    <table class="preferences">
        <tr>
            <td class="type right-align"><label for="weights-global-vehicle">{% trans "Vehicle:" %}</label></td>
            <td class="preference">
                <select class="weights-preferences" id="weights-global-vehicle" name="global__vehicle">
                    {% for vehicle in weight_collection.VEHICLE_CHOICES %}
                    <option value="{{vehicle.0}}" {% if vehicle.0 == weight_collection.vehicle %}selected="selected"{% endif %} >{{vehicle.1}}</option>
                    {% endfor %}
                </select>
            </td>
        </tr>
        <tr>
            <td class="type right-align"><label for="weights-global-oneway">{% trans "Consider oneways:" %}</label></td>
            <td class="preference"><input type="checkbox" name="global__oneway" {% if weight_collection.oneway %}checked="checked"{% endif %} /></td>
        </tr>
    </table>
</div>
<h3>{% trans "Preferred ways" %}</h3>
<div>
    <table class="preferences">
        {% for preferred in weight_collection.preferred_set.all %}
            <tr {% if not preferred.use %} style="display: none"{% endif %}>
                <td class="type right-align">{{ preferred.name }}</td>
                <td class="preference"><input type="checkbox" name="preferred__{{preferred.slug}}" {% if preferred.value %}checked="checked"{% endif %} /></td>
            </tr>
        {% endfor %}
    </table>
</div>
{% for c in weight_collection.weightclass_set.all %}
<h3 id="h-{{ c.slug }}" {% if not c.visible %} style="display: none"{% endif %}>{{ c.name }}</h3>
<div>
    <p>
    {% blocktrans with link=c.link %}
    Set your preference of ways with this parameters. Detailed information about parameters is on <a href="{{ link }}" target="_blank">OpenStreetMap Wiki</a>.
    {% endblocktrans %}
    </p>
    {% if c.max != None or c.min != None %}
    <table id="weights-limits-{{c.slug}}" class="weights-limits preferences" >
        <tr>
            {% if c.max != None %}
            <td class="right-align">Max:</td>
            <td><input type="text" value="{{c.max|floatformat:'0'}}" size="2" id="weights-{{c.slug}}-max" name="{{c.slug}}__max" /></td>
            {% endif %}
            {% if c.min != None %}
            <td class="right-align">Min:</td>
            <td><input type="text" value="{{c.min|floatformat:'0'}}" size="2" id="weights-{{c.slug}}-min" name="{{c.slug}}__min" /></td>
            {% endif %}
        </tr>
    </table>
    {% endif %}
    {% if c.weight_set.all %}
    <table id="weights-types-{{c.slug}}" class="weights-types preferences">
        {% for w in c.weight_set.all %}
        <tr {% if not w.visible %} style="display: none"{% endif %}>
            <td class="type right-align">{{w.name}}</td>
            <td class="preference">
                <select class="weights-preferences" id="weights-{{c.slug}}-{{w.slug}}-preference" name="{{c.slug}}__{{w.slug}}" >
                    {% for choice in w.PREFERENCE_CHOICES %}
                    {% if choice.0 == w.preference %}
                    <option value="{{choice.0}}" selected="selected" >{{choice.1}}</option>
                    {% else %}
                    <option value="{{choice.0}}">{{choice.1}}</option>
                    {% endif %}
                    {% endfor %}
                </select>
            </td>
        </tr>
        {% endfor %}
    </table>
    {% endif %}
</div>
{% endfor %}
